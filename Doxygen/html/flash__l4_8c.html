<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensor de vibração MQTT - Trabalho de conclusão de curso: flash_l4.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="CatolicaSC.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sensor de vibração MQTT - Trabalho de conclusão de curso<span id="projectnumber">&#160;V01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eb1463819d84903762eb6f59cc0c4383.html">Application</a></li><li class="navelem"><a class="el" href="dir_d661bddfff49214287b7921df1d9647c.html">Common</a></li><li class="navelem"><a class="el" href="dir_0434524b8a475c4b885b64641a3b0b90.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">flash_l4.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Management of the L4 internal flash memory.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;main.h&quot;</code><br />
<code>#include &quot;flash.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for flash_l4.c:</div>
<div class="dyncontent">
<div class="center"><img src="flash__l4_8c__incl.png" border="0" usemap="#aflash__l4_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac387301961fe5833b6739f558239932e"><td class="memItemLeft" align="right" valign="top"><a id="ac387301961fe5833b6739f558239932e" name="ac387301961fe5833b6739f558239932e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ROUND_DOWN</b>(a,  b)&#160;&#160;&#160;(((a) / (b)) * (b))</td></tr>
<tr class="separator:ac387301961fe5833b6739f558239932e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memItemLeft" align="right" valign="top"><a id="a3acffbd305ee72dcd4593c0d8af64a4f" name="a3acffbd305ee72dcd4593c0d8af64a4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MIN</b>(a,  b)&#160;&#160;&#160;(((a) &lt; (b)) ? (a) : (b))</td></tr>
<tr class="separator:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a70b835f86aec7fa69b9c98f1e5bfa8fd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#a70b835f86aec7fa69b9c98f1e5bfa8fd">FLASH_get_pageInBank</a> (uint32_t addr)</td></tr>
<tr class="memdesc:a70b835f86aec7fa69b9c98f1e5bfa8fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the page of a given address within its FLASH bank.  <a href="flash__l4_8c.html#a70b835f86aec7fa69b9c98f1e5bfa8fd">More...</a><br /></td></tr>
<tr class="separator:a70b835f86aec7fa69b9c98f1e5bfa8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add67bb927805cc49799c8600d1d95c8b"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#add67bb927805cc49799c8600d1d95c8b">FLASH_Init</a> (void)</td></tr>
<tr class="memdesc:add67bb927805cc49799c8600d1d95c8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks Flash for write access.  <a href="flash__l4_8c.html#add67bb927805cc49799c8600d1d95c8b">More...</a><br /></td></tr>
<tr class="separator:add67bb927805cc49799c8600d1d95c8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af685203cae9eca18093df6d312b24507"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#af685203cae9eca18093df6d312b24507">FLASH_write_at</a> (uint32_t address, uint64_t *pData, uint32_t len_bytes)</td></tr>
<tr class="memdesc:af685203cae9eca18093df6d312b24507"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to FLASH memory.  <a href="flash__l4_8c.html#af685203cae9eca18093df6d312b24507">More...</a><br /></td></tr>
<tr class="separator:af685203cae9eca18093df6d312b24507"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9380e0f99cffeeeb13d9b06624e4369c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#a9380e0f99cffeeeb13d9b06624e4369c">FLASH_unlock_erase</a> (uint32_t address, uint32_t len_bytes)</td></tr>
<tr class="memdesc:a9380e0f99cffeeeb13d9b06624e4369c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase FLASH memory page(s) at address.  <a href="flash__l4_8c.html#a9380e0f99cffeeeb13d9b06624e4369c">More...</a><br /></td></tr>
<tr class="separator:a9380e0f99cffeeeb13d9b06624e4369c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8fda3898ab3b75a5c3f4bf79a770bc1"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#aa8fda3898ab3b75a5c3f4bf79a770bc1">FLASH_get_bank</a> (uint32_t addr)</td></tr>
<tr class="memdesc:aa8fda3898ab3b75a5c3f4bf79a770bc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the bank of a given address.  <a href="flash__l4_8c.html#aa8fda3898ab3b75a5c3f4bf79a770bc1">More...</a><br /></td></tr>
<tr class="separator:aa8fda3898ab3b75a5c3f4bf79a770bc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5ce22c6d30fa9c9246006340737352"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#a3b5ce22c6d30fa9c9246006340737352">FLASH_update</a> (uint32_t dst_addr, const void *data, uint32_t size)</td></tr>
<tr class="memdesc:a3b5ce22c6d30fa9c9246006340737352"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update a chunk of the FLASH memory.  <a href="flash__l4_8c.html#a3b5ce22c6d30fa9c9246006340737352">More...</a><br /></td></tr>
<tr class="separator:a3b5ce22c6d30fa9c9246006340737352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0df565aa9ad4188c60f18b602564c7"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#abb0df565aa9ad4188c60f18b602564c7">GetPage</a> (uint32_t uAddr)</td></tr>
<tr class="memdesc:abb0df565aa9ad4188c60f18b602564c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the page of a given address.  <a href="flash__l4_8c.html#abb0df565aa9ad4188c60f18b602564c7">More...</a><br /></td></tr>
<tr class="separator:abb0df565aa9ad4188c60f18b602564c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18fb0bb3dd8e706e247f59bf67c5e28e"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#a18fb0bb3dd8e706e247f59bf67c5e28e">GetBank</a> (uint32_t uAddr)</td></tr>
<tr class="memdesc:a18fb0bb3dd8e706e247f59bf67c5e28e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the bank of a given address.  <a href="flash__l4_8c.html#a18fb0bb3dd8e706e247f59bf67c5e28e">More...</a><br /></td></tr>
<tr class="separator:a18fb0bb3dd8e706e247f59bf67c5e28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86ae709e94e2228ab27d40da5724c4d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#ab86ae709e94e2228ab27d40da5724c4d">FLASH_Erase_Size</a> (uint32_t uStart, uint32_t uLength)</td></tr>
<tr class="memdesc:ab86ae709e94e2228ab27d40da5724c4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function erases bytes in user flash area.  <a href="flash__l4_8c.html#ab86ae709e94e2228ab27d40da5724c4d">More...</a><br /></td></tr>
<tr class="separator:ab86ae709e94e2228ab27d40da5724c4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270edced3a8a50f494b19eb7e8313d27"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flash__l4_8c.html#a270edced3a8a50f494b19eb7e8313d27">FLASH_Write</a> (uint32_t uDestination, uint32_t *pSource, uint32_t uLength)</td></tr>
<tr class="memdesc:a270edced3a8a50f494b19eb7e8313d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function writes a data buffer in flash (data are 32-bit aligned).  <a href="flash__l4_8c.html#a270edced3a8a50f494b19eb7e8313d27">More...</a><br /></td></tr>
<tr class="separator:a270edced3a8a50f494b19eb7e8313d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Management of the L4 internal flash memory. </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; Copyright (c) 2017 STMicroelectronics International N.V. All rights reserved.</center></h2>
<p >Redistribution and use in source and binary forms, with or without modification, are permitted, provided that the following conditions are met:</p>
<ol type="1">
<li>Redistribution of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of STMicroelectronics nor the names of other contributors to this software may be used to endorse or promote products derived from this software without specific written permission.</li>
<li>This software, including modifications and/or derivative works of this software, must execute solely and exclusively on microcontroller or microprocessor devices manufactured by or for STMicroelectronics.</li>
<li>Redistribution and use of this software other than as permitted under this license is void and will automatically terminate your rights under this license.</li>
</ol>
<p >THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab86ae709e94e2228ab27d40da5724c4d" name="ab86ae709e94e2228ab27d40da5724c4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86ae709e94e2228ab27d40da5724c4d">&#9670;&nbsp;</a></span>FLASH_Erase_Size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FLASH_Erase_Size </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function erases bytes in user flash area. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Start</td><td>Start of user flash area </td></tr>
    <tr><td class="paramname">uLength</td><td>number of bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>status. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8fda3898ab3b75a5c3f4bf79a770bc1" name="aa8fda3898ab3b75a5c3f4bf79a770bc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8fda3898ab3b75a5c3f4bf79a770bc1">&#9670;&nbsp;</a></span>FLASH_get_bank()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FLASH_get_bank </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the bank of a given address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>addr Address in the FLASH Memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Bank</td><td>identifier. FLASH_BANK_1 FLASH_BANK_2 </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="flash__l4_8c.html#a9380e0f99cffeeeb13d9b06624e4369c">FLASH_unlock_erase()</a>.</p>

</div>
</div>
<a id="a70b835f86aec7fa69b9c98f1e5bfa8fd" name="a70b835f86aec7fa69b9c98f1e5bfa8fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b835f86aec7fa69b9c98f1e5bfa8fd">&#9670;&nbsp;</a></span>FLASH_get_pageInBank()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int FLASH_get_pageInBank </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the page of a given address within its FLASH bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>addr Address in the FLASH memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>Success: Page number. &lt;0 Failure: The address in not mapped in the internal FLASH memory. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group___peripheral__memory__map.html#ga23a9099a5f8fc9c6e253c0eecb2be8db">FLASH_BASE</a>, and <a class="el" href="group___peripheral__memory__map.html#gae69620948dea1b76e0ab7843ab719db7">FLASH_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="flash__l4_8c.html#a9380e0f99cffeeeb13d9b06624e4369c">FLASH_unlock_erase()</a>.</p>

</div>
</div>
<a id="add67bb927805cc49799c8600d1d95c8b" name="add67bb927805cc49799c8600d1d95c8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add67bb927805cc49799c8600d1d95c8b">&#9670;&nbsp;</a></span>FLASH_Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FLASH_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks Flash for write access. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">HAL</td><td>Status. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9380e0f99cffeeeb13d9b06624e4369c" name="a9380e0f99cffeeeb13d9b06624e4369c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9380e0f99cffeeeb13d9b06624e4369c">&#9670;&nbsp;</a></span>FLASH_unlock_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int FLASH_unlock_erase </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erase FLASH memory page(s) at address. </p>
<dl class="section note"><dt>Note</dt><dd>The range to erase shall not cross the bank boundary. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>address Start address to erase from. </td></tr>
    <tr><td class="paramname">In</td><td>len_bytes Length to be erased. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success. -1: Failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="struct_f_l_a_s_h___erase_init_type_def.html#aa07868a5b012861c6111322c3dccdbec">FLASH_EraseInitTypeDef::Banks</a>, <a class="el" href="flash__l4_8c.html#aa8fda3898ab3b75a5c3f4bf79a770bc1">FLASH_get_bank()</a>, <a class="el" href="flash__l4_8c.html#a70b835f86aec7fa69b9c98f1e5bfa8fd">FLASH_get_pageInBank()</a>, <a class="el" href="group___f_l_a_s_h___type___erase.html#ga3664ce55155ec4990873c51737d787ce">FLASH_TYPEERASE_PAGES</a>, <a class="el" href="struct_f_l_a_s_h___erase_init_type_def.html#a883b193a78c63e993f1d70102eac64b3">FLASH_EraseInitTypeDef::NbPages</a>, <a class="el" href="struct_f_l_a_s_h___erase_init_type_def.html#ad5ac387429b4b85d2ee00e34559b4a28">FLASH_EraseInitTypeDef::Page</a>, and <a class="el" href="struct_f_l_a_s_h___erase_init_type_def.html#ae2154c09320f3ef7feb8f4a84e9ac17b">FLASH_EraseInitTypeDef::TypeErase</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="flash__l4_8c_a9380e0f99cffeeeb13d9b06624e4369c_cgraph.png" border="0" usemap="#aflash__l4_8c_a9380e0f99cffeeeb13d9b06624e4369c_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a3b5ce22c6d30fa9c9246006340737352" name="a3b5ce22c6d30fa9c9246006340737352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5ce22c6d30fa9c9246006340737352">&#9670;&nbsp;</a></span>FLASH_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FLASH_update </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update a chunk of the FLASH memory. </p>
<dl class="section note"><dt>Note</dt><dd>The FLASH chunk must no cross a FLASH bank boundary. </dd>
<dd>
The source and destination buffers have no specific alignment constraints. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>dst_addr Destination address in the FLASH memory. </td></tr>
    <tr><td class="paramname">In</td><td>data Source address. </td></tr>
    <tr><td class="paramname">In</td><td>size Number of bytes to update. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success. &lt;0: Failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="iot__flash__config_8c.html#a99dd4646a6f04c3a04e2145489248338">setIoTDeviceConfig()</a>.</p>

</div>
</div>
<a id="a270edced3a8a50f494b19eb7e8313d27" name="a270edced3a8a50f494b19eb7e8313d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270edced3a8a50f494b19eb7e8313d27">&#9670;&nbsp;</a></span>FLASH_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t FLASH_Write </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uDestination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>pSource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function writes a data buffer in flash (data are 32-bit aligned). </p>
<dl class="section note"><dt>Note</dt><dd>After writing data buffer, the flash content is checked. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uDestination</td><td>Start address for target location </td></tr>
    <tr><td class="paramname">pSource</td><td>pointer on buffer with data to write </td></tr>
    <tr><td class="paramname">uLength</td><td>Length of data buffer in byte. It has to be 64-bit aligned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint32_t</td><td>0: Data successfully written to Flash memory 1: Error occurred while writing data in Flash memory 2: Written Data in flash memory is different from expected one </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af685203cae9eca18093df6d312b24507" name="af685203cae9eca18093df6d312b24507"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af685203cae9eca18093df6d312b24507">&#9670;&nbsp;</a></span>FLASH_write_at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int FLASH_write_at </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>pData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write to FLASH memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">In</td><td>address Destination address. </td></tr>
    <tr><td class="paramname">In</td><td>pData Data to be programmed: Must be 8 byte aligned. </td></tr>
    <tr><td class="paramname">In</td><td>len_bytes Number of bytes to be programmed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success. -1: Failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group___c_m_s_i_s___core___reg_acc_functions.html#ga2299877e4ba3e162ca9dbabd6e0abef6">__disable_irq()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="flash__l4_8c_af685203cae9eca18093df6d312b24507_cgraph.png" border="0" usemap="#aflash__l4_8c_af685203cae9eca18093df6d312b24507_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a18fb0bb3dd8e706e247f59bf67c5e28e" name="a18fb0bb3dd8e706e247f59bf67c5e28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18fb0bb3dd8e706e247f59bf67c5e28e">&#9670;&nbsp;</a></span>GetBank()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t GetBank </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the bank of a given address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uAddr</td><td>Address of the FLASH Memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>bank of a given address </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abb0df565aa9ad4188c60f18b602564c7" name="abb0df565aa9ad4188c60f18b602564c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0df565aa9ad4188c60f18b602564c7">&#9670;&nbsp;</a></span>GetPage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t GetPage </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>uAddr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the page of a given address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uAddr</td><td>Address of the FLASH Memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>page of a given address </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="group___peripheral__memory__map.html#ga23a9099a5f8fc9c6e253c0eecb2be8db">FLASH_BASE</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Developed by &#160;<a href="https://www.catolicasc.org.br/">
<img class="footer" src="CatolicaSC.png" alt="Centro universitário Católica de Santa Catarina"/>
</a>
</small></address>
</body>
</html>
